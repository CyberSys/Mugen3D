local M = {}

function M.new(char)
    local obj = {}
    obj.char = char
    obj.env = CS.Mugen3D.Environment(char.player)
    local mt = {
        __index = function(t, key)
            if M[key] and type(M[key]) == "function" then
            	return (M[key])(t)
            elseif M[key] and type(M[key]) ~= "function" then
                return M[key]
            else
            	return t.env[key]
            end
        end
    }
	setmetatable(obj, mt)
	return obj
end

function M.stateNo(self)
	return self.char.stateNo
end

return M